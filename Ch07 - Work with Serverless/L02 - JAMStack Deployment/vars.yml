default: &default
  REGION: ${opt:region, self:provider.region}
  STAGE: ${opt:stage, "dev"}
  STACKNAME: ${self:service}-${self:custom.vars.STAGE}

dev:
  <<: [*default]
  STAGEFLAG: dev
  DOMAIN: { Fn::GetAtt: [ProxyEntry, Host] }
  HOSTED_ZONE: { Ref: "AWS::NoValue" }
  SITE_URL: { Fn::Join: ["", ["https://", "${self:custom.vars.DOMAIN}"]] }
  ACM_CERT_ARN: { Ref: "AWS::NoValue" }

prod: &prod
  <<: [*default]
  STAGEFLAG: prod
  APEX_DOMAIN: acg.danvanbrunt.com
  DOMAIN: demosite.acg.danvanbrunt.com
  HOSTED_ZONE: "${self:custom.vars.APEX_DOMAIN}."
  SITE_URL: { Fn::Join: ["", ["https://", "${self:custom.vars.DOMAIN}"]] }
  ACM_CERT_ARN: "arn:aws:acm:us-east-1:645655324390:certificate/0f3d1402-3d47-4233-b2ac-4a6f0020005e"

rc:
  <<: [*prod]
  STAGEFLAG: rc
  APEX_DOMAIN: acg.danvanbrunt.com
  DOMAIN: ${self:custom.vars.STAGE}--${self:service}.rc.${self:custom.vars.APEX_DOMAIN}
  ACM_CERT_ARN: "arn:aws:acm:us-east-1:645655324390:certificate/0f3d1402-3d47-4233-b2ac-4a6f0020005e"
